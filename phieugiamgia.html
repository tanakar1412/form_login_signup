<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Phi·∫øu Gi·∫£m Gi√°</title>
  <style>
    * { box-sizing: border-box; font-family: Arial, sans-serif; }
    body { background: #f4f4f4; padding: 30px; margin: 0; }

    .card {
      background: white;
      border-radius: 8px;
      padding: 20px 30px;
      max-width: 1200px;
      margin: auto;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .card h2 { margin-bottom: 20px; }

    .top-bar {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 15px;
    }

    .top-bar input[type="text"] {
      padding: 8px;
      width: 300px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }

    .filters {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 20px;
    }

    .filters input[type="date"],
    .filters select {
      padding: 6px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }

    .btn {
      padding: 6px 12px;
      border: 1px solid orange;
      background: white;
      color: orange;
      font-weight: bold;
      border-radius: 6px;
      cursor: pointer;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }

    th, td {
      padding: 10px;
      text-align: center;
      border: 1px solid #eee;
      font-size: 14px;
    }

    th {
      background-color: #f9f9f9;
    }

    .badge {
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 13px;
      font-weight: bold;
    }

    .badge-blue {
      background: #e3f2fd;
      color: #1e88e5;
    }

    .badge-pink {
      background: #fde7f3;
      color: #d81b60;
    }

    .status {
      background: #e9fbe9;
      color: green;
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 13px;
      font-weight: 500;
    }

    .action-icon {
      color: orange;
      cursor: pointer;
    }
  </style>
</head>
<body>

<div class="card">
  <h2>Phi·∫øu gi·∫£m gi√°</h2>

  <div class="top-bar">
    <input type="text" id="searchInput" placeholder="üîç T√¨m phi·∫øu gi·∫£m gi√° theo m√£ ho·∫∑c t√™n">
    <div style="display: flex; gap: 10px;">
      <button class="btn" onclick="createVoucher()">+ T·∫°o m·ªõi</button>
      <button class="btn" onclick="exportExcel()">Xu·∫•t Excel</button>
    </div>
  </div>

  <div class="filters">
    <input type="date" id="fromDate">
    <input type="date" id="toDate">
    <select id="typeFilter">
      <option value="">Ki·ªÉu</option>
      <option value="C√° nh√¢n">C√° nh√¢n</option>
      <option value="C√¥ng khai">C√¥ng khai</option>
    </select>
    <select id="discountTypeFilter">
      <option value="">Lo·∫°i</option>
      <option value="Ph·∫ßn trƒÉm">Ph·∫ßn trƒÉm</option>
      <option value="S·ªë ti·ªÅn">S·ªë ti·ªÅn</option>
    </select>
    <select id="statusFilter">
      <option value="">Tr·∫°ng th√°i</option>
      <option value="ƒêang di·ªÖn ra">ƒêang di·ªÖn ra</option>
      <option value="ƒê√£ k·∫øt th√∫c">ƒê√£ k·∫øt th√∫c</option>
    </select>
  </div>

  <table id="voucherTable">
    <thead>
      <tr>
        <th>STT</th>
        <th>M√£</th>
        <th>T√™n</th>
        <th>Ki·ªÉu</th>
        <th>Lo·∫°i</th>
        <th>S·ªë l∆∞·ª£ng</th>
        <th>Ng√†y b·∫Øt ƒë·∫ßu</th>
        <th>Ng√†y k·∫øt th√∫c</th>
        <th>Tr·∫°ng th√°i</th>
        <th>H√†nh ƒë·ªông</th>
      </tr>
    </thead>
    <tbody>
      <!-- JS Render -->
    </tbody>
  </table>
</div>

<script>
  const data = [
    {
      code: 'kkkjkk', name: 'kkkkkkk', type: 'C√° nh√¢n', kind: '10%', amount: 20,
      start: '2023-12-21T13:36', end: '2023-12-30T00:00', status: 'ƒêang di·ªÖn ra'
    },
    {
      code: 'PGGTT', name: 'tri an kh', type: 'C√° nh√¢n', kind: '100%', amount: 0,
      start: '2023-12-20T10:29', end: '2023-12-23T00:00', status: 'ƒêang di·ªÖn ra'
    },
    {
      code: 'PGG2023', name: 'Thi b·∫£o v·ªá', type: 'C√¥ng khai', kind: '10%', amount: 97,
      start: '2023-12-20T10:05', end: '2023-12-30T00:00', status: 'ƒêang di·ªÖn ra'
    },
    {
      code: 'PGG7653', name: 'Tri √¢n kh√°ch h√†ng', type: 'C√° nh√¢n', kind: '10%', amount: 20,
      start: '2023-12-18T00:00', end: '2023-12-29T00:00', status: 'ƒêang di·ªÖn ra'
    },
    {
      code: 'PGG12', name: 'L·∫≠p ƒë√¥ng', type: 'C√¥ng khai', kind: '250,000 ‚Ç´', amount: 30,
      start: '2023-12-01T00:00', end: '2023-12-12T00:00', status: 'ƒêang di·ªÖn ra'
    }
  ];

  function renderTable(filteredData) {
    const tbody = document.querySelector('#voucherTable tbody');
    tbody.innerHTML = '';
    filteredData.forEach((v, index) => {
      const badgeClass = v.type === 'C√¥ng khai' ? 'badge-pink' : 'badge-blue';
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${index + 1}</td>
        <td>${v.code}</td>
        <td>${v.name}</td>
        <td><span class="badge ${badgeClass}">${v.type}</span></td>
        <td>${v.kind}</td>
        <td>${v.amount}</td>
        <td>${formatDate(v.start)}</td>
        <td>${formatDate(v.end)}</td>
        <td><span class="status">${v.status}</span></td>
        <td><span class="action-icon">üëÅÔ∏è</span></td>
      `;
      tbody.appendChild(tr);
    });
  }

  function formatDate(isoString) {
    const date = new Date(isoString);
    return date.toLocaleString('vi-VN');
  }

  function applyFilters() {
    const search = document.getElementById('searchInput').value.toLowerCase();
    const type = document.getElementById('typeFilter').value;
    const kind = document.getElementById('discountTypeFilter').value;
    const status = document.getElementById('statusFilter').value;
    const from = document.getElementById('fromDate').value;
    const to = document.getElementById('toDate').value;

    const filtered = data.filter(v => {
      const matchesSearch = v.code.toLowerCase().includes(search) || v.name.toLowerCase().includes(search);
      const matchesType = !type || v.type === type;
      const matchesKind = !kind || (kind === 'Ph·∫ßn trƒÉm' ? v.kind.includes('%') : v.kind.includes('‚Ç´'));
      const matchesStatus = !status || v.status === status;

      const startTime = new Date(v.start);
      const fromTime = from ? new Date(from) : null;
      const toTime = to ? new Date(to) : null;

      const matchesDate = (!fromTime || startTime >= fromTime) && (!toTime || startTime <= toTime);

      return matchesSearch && matchesType && matchesKind && matchesStatus && matchesDate;
    });

    renderTable(filtered);
  }

  // Hook filters
  document.getElementById('searchInput').addEventListener('input', applyFilters);
  document.getElementById('typeFilter').addEventListener('change', applyFilters);
  document.getElementById('discountTypeFilter').addEventListener('change', applyFilters);
  document.getElementById('statusFilter').addEventListener('change', applyFilters);
  document.getElementById('fromDate').addEventListener('change', applyFilters);
  document.getElementById('toDate').addEventListener('change', applyFilters);

  // Export & Create (stub)
  function exportExcel() {
    alert("üì§ Ch·ª©c nƒÉng Xu·∫•t Excel ƒëang ƒë∆∞·ª£c ph√°t tri·ªÉn!");
  }

  function createVoucher() {
    alert("üìù Ch·ª©c nƒÉng T·∫°o phi·∫øu gi·∫£m gi√° s·∫Ω ƒë∆∞·ª£c m·ªü form!");
  }

  // Initial render
  renderTable(data);
</script>

</body>
</html>
